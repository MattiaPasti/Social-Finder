<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Social Finder ‚Äì</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Remix Icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css" />

    <!-- CSS custom -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üîç</text></svg>" />
  </head>

  <body class="min-h-screen bg-gradient-to-br from-slate-100 to-slate-200 flex flex-col items-center py-8 px-4 sm:px-6">
    <!-- HEADER -->
    <header class="text-center mb-8 max-w-3xl">
      <h1 class="text-4xl sm:text-5xl font-extrabold bg-gradient-to-r from-indigo-500 via-purple-500 to-fuchsia-500 bg-clip-text text-transparent">Social Finder <span class="text-indigo-600">‚Ä¢</span> Open Version</h1>
      <p class="mt-2 text-slate-600 text-lg">Ricerca informazioni sui social media in tempo reale</p>
    </header>

    <!-- MAIN -->
    <main class="w-full max-w-5xl flex flex-col gap-8">
      <!-- SEARCH CARD -->
      <section class="bg-white/90 backdrop-blur-md rounded-2xl shadow-lg px-6 py-8">
        <form id="searchForm" class="grid sm:grid-cols-3 gap-4 sm:gap-6 items-end">
          <div>
            <label for="nome" class="block font-medium text-slate-700 mb-1">Nome</label>
            <input type="text" id="nome" name="nome" required placeholder="Mario" class="w-full rounded-xl border-2 border-slate-200 px-4 py-2.5 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition" />
          </div>
          <div>
            <label for="cognome" class="block font-medium text-slate-700 mb-1">Cognome</label>
            <input type="text" id="cognome" name="cognome" required placeholder="Rossi" class="w-full rounded-xl border-2 border-slate-200 px-4 py-2.5 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition" />
          </div>
          <button type="submit" class="inline-flex justify-center items-center gap-2 rounded-xl w-full bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-3 transition active:scale-95">
            <i class="ri-search-line text-lg"></i>
            Cerca
          </button>
        </form>
      </section>

      <!-- DASHBOARD -->
      <section id="dashboard" class="hidden bg-white/90 backdrop-blur-md rounded-2xl shadow-lg px-6 py-4">
        <div class="flex flex-wrap justify-between items-center gap-3">
          <div class="flex flex-wrap items-center gap-4 text-sm sm:text-base">
            <span class="text-slate-700">Totale: <span id="total-count">0</span></span>
            <span class="text-green-600">Valide: <span id="valid-count">0</span></span>
            <span class="text-red-600">Non valide: <span id="invalid-count">0</span></span>
            <span class="text-slate-500">In corso: <span id="pending-count">0</span></span>
          </div>
          <div class="flex items-center gap-2">
            <button id="toggle-console" class="text-sm bg-indigo-100 hover:bg-indigo-200 px-3 py-1 rounded-lg transition">Mostra console</button>
            <button id="toggle-details" class="hidden text-sm bg-slate-100 hover:bg-slate-200 px-3 py-1 rounded-lg transition">Mostra dettagli</button>
          </div>
        </div>
      </section>

      <!-- CONSOLE + RESULTS -->
      <section class="flex flex-col gap-8">
        <!-- CONSOLE -->
        <div id="console-container" class="hidden w-full flex flex-col bg-slate-900/95 text-green-300 rounded-2xl shadow-lg">
          <div class="flex justify-between px-6 py-3 font-semibold text-green-200 border-b border-slate-700 text-sm">
            <span>Console Live</span><span>‚ñº Streaming</span>
          </div>
          <pre id="console" class="px-6 py-4 h-80 overflow-y-auto font-mono text-sm leading-relaxed"></pre>
        </div>

        <!-- RESULTS WRAPPER -->
        <div class="w-full flex flex-col">
          <!-- INLINE LOADER (fallback) -->
          <div id="loading-indicator" class="hidden flex flex-col items-center gap-4 py-12">
            <div class="loading-spinner"></div>
            <p class="text-slate-600 font-medium">Analisi in corso‚Ä¶</p>
          </div>

          <!-- NO RESULTS -->
          <!--     <div id="no-results"
          class="hidden text-center bg-white/80 rounded-xl shadow px-8 py-12 flex flex-col items-center gap-4">
          <i class="ri-search-eye-line text-5xl text-slate-400"></i>
          <h4 class="text-xl font-semibold">Nessun profilo trovato</h4>
          <p class="text-slate-600">Prova un nome diverso o verifica i dati inseriti</p>
        </div>     -->

          <!-- CARDS GRID -->
          <section id="cards" class="results-container"></section>
        </div>
      </section>
    </main>

    <!-- OVERLAY LOADER FULLSCREEN -->
    <div id="loading-overlay" class="hidden fixed inset-0 z-[9999] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-4">
      <div class="spinner-xl"></div>
      <p class="text-slate-700 font-medium text-lg">Elaborazione in corso‚Ä¶</p>
    </div>

    <!-- DISCLAIMER BANNER ‚Äì Student Project -->
    <div id="edu-banner" hidden class="fixed top-0 inset-x-0 z-50">
      <div class="mx-auto max-w-screen-xl">
        <div class="m-3 rounded-2xl shadow-lg border bg-white/95 backdrop-blur p-4 md:p-5">
          <div class="flex items-start gap-3">
            <div class="shrink-0 mt-0.5">
              <!-- Icona semplice -->
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="opacity-80">
                <circle cx="12" cy="12" r="10" stroke-width="1.5"></circle>
                <line x1="12" y1="8" x2="12" y2="13" stroke-width="1.5"></line>
                <circle cx="12" cy="16.5" r="1" stroke-width="1.5"></circle>
              </svg>
            </div>

            <div class="grow">
              <p class="font-semibold">Progetto studentesco ‚Äî solo dimostrazione</p>
              <p class="text-sm leading-5 mt-1">
                Questo sito √® un <strong>prototipo a scopo didattico</strong>, senza fini commerciali. √à fornito ‚Äúcos√¨ com‚Äô√®‚Äù, senza garanzie; i marchi citati appartengono ai rispettivi proprietari e <strong>non esiste alcuna affiliazione</strong>. I contenuti potrebbero essere incompleti o imprecisi. Se qualcosa ti riguarda e vuoi la rimozione, contattami.
              </p>
              <div class="flex flex-wrap justify-center gap-2 mt-3 w-full">
                <a href="/disclaimer" target="_blank" rel="noopener noreferrer" class="underline text-sm text-center flex-1">Leggi il disclaimer</a>
                <a href="/privacy" target="_blank" rel="noopener noreferrer" class="underline text-sm text-center flex-1">Privacy</a>
                <a href="https://www.linkedin.com/in/mattia-pasti-68a91a178" target="_blank" rel="noopener noreferrer" class="underline text-sm text-center flex-1">Guarda il mio curriculum</a>
                <a href="https://github.com/MattiaPasti" target="_blank" rel="noopener noreferrer" class="underline text-sm text-center flex-1">Guarda altri progetti</a>
              </div>
            </div>

            <button type="button" data-close class="ml-2 rounded-lg px-3 py-2 text-sm border hover:bg-gray-50" aria-label="Chiudi banner">OK</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      ;(function () {
        const KEY = 'eduBannerAck'
      
        // Legge stato: "accepted", "rejected" o null
        function getStatus() {
          try {
            return JSON.parse(localStorage.getItem(KEY))?.status || null
          } catch {
            return null
          }
        }
      
        function setStatus(status) {
          try {
            localStorage.setItem(KEY, JSON.stringify({ status }))
          } catch {}
        }
      
        document.addEventListener('DOMContentLoaded', () => {
          const banner = document.getElementById('edu-banner')
          if (!banner) return
      
          const status = getStatus()
      
          // Se non accettato => mostra banner
          if (status !== 'accepted') {
            banner.hidden = false
          }
      
          // Bottone OK (accetta)
          const okBtn = banner.querySelector('[data-close]')
          if (okBtn) {
            okBtn.addEventListener('click', () => {
              setStatus('accepted')
              banner.remove()
            })
          }
      
          // ESC chiude senza accettare ‚Üí rimarr√† non accettato e quindi riapparir√†
          banner.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
              banner.remove()
            }
          })
        })
      })()
    </script>

    <!-- JS -->
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
  </body>
</html>
